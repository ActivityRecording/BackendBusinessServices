<h2>TestReports</h2>
<div ng-controller="TestReportController">
	<div class="well" ng-repeat="testReport in testReports">
		<h3>{{testReport.title}}</h3>
		<ul>
			<li>Author: {{testReport.author.forename}} {{testReport.author.surname}}</li>
			<li>Date: {{testReport.date | date:'dd.MM.yyyy'}}</li>
		</ul>
		<p>{{testReport.text}}</p>
		
		<br/>
		<h4>Comments</h4>
		<div class="well" ng-repeat="comment in testReport.comments">
			<h5>{{comment.title}}</h5>
			<ul>
				<li>Author: {{comment.author.forename}} {{comment.author.surname}}</li>
				<li>Date: {{comment.date | date:'dd.MM.yyyy'}}</li>
			</ul>
			<p>{{comment.text}}</p>
		</div>
		
		<div ng-controller="CommentController">
			<h4>Add a Comment</h4>
			<div class="well" >
				<form id="form{{testReport.id}}" name="commentForm">
			    	<fieldset>
			    		<div class="control-group">
					        <label for="title{{testReport.id}}">Title</label>
					        <input type="text" id="title{{testReport.id}}" ng-model="currentComment.title" ng-minlength="2" ng-minlength="255" required />
					    </div>
					    <div class="control-group">
					        <label for="date{{testReport.id}}">Date</label>
					        <input type="text" id="date{{testReport.id}}" ng-model="currentComment.date" date="dd.MM.yyyy" ui-date="{ dateFormat: 'dd.mm.yy' }" required />
					    </div>
					    <div class="control-group">
					        <label for="author{{testReport.id}}">Author</label>
					        <select id="author{{testReport.id}}" ng-model="currentComment.author" ng-options="(author.forename + ' ' + author.surname) for author in authors">
					        	<option value="">-- Select a Author --</option>
					        </select>
				        </div>
				        <div class="control-group">
					    	<label for="text{{testReport.id}}">Text</label>
					        <textarea id="text{{testReport.id}}" ng-model="currentComment.text" rows="5" required></textarea>
					    </div>
					    <div class="control-group">
					        <label for="id{{testReport.id}}">Id</label>
					        <input type="text" id="id{{testReport.id}}" ng-model="currentComment.id" disabled="disabled"/>
					    </div>
					    <div class="control-group">
					    	<label>&nbsp;</label>		        
					        <button id="save" ng-click="save()" class="btn">Save</button>
					        <button id="cancel" ng-click="cancel()" class="btn">Cancel</button>
					    </div>				    
					</fieldset>
					
					<div class="clearfix"></div>
			    </form>
			</div>
		</div>
    </div>
</div>